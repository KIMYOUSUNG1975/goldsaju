<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>달빛천사의운명노트</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; line-height: 1.8; padding: 20px; }
    h1 { font-size: 2em; }
    label { font-weight: bold; margin-right: 10px; }
    input, select { margin: 5px 0 15px 0; padding: 5px; font-size: 1em; }
    .section-title {
      font-size: 1.2em;
      margin-top: 20px;
      padding-bottom: 5px;
      border-bottom: 2px solid #ccc;
      color: #5a2a83;
    }
  </style>
</head>
<body>
  <h1>🌙 달빛천사의운명노트</h1>

  <label for="birthdate">생년월일</label>
  <select id="year"></select>
  <select id="month"></select>
  <select id="day"></select>
  <br>

  <label for="birthtime">태어난 시간</label>
  <input type="text" id="birthtime" placeholder="예: 오전 2시">
  <br>

  <label for="gender">성별</label>
  <select id="gender">
    <option value="female">여자</option>
    <option value="male">남자</option>
  </select>

  <p id="ageDisplay" style="font-weight:bold; margin-top:10px;">현재 나이: -세</p>

  <button onclick="showResult()">🔮 사주풀이 보기</button>

  <div id="result" style="margin-top: 30px;"></div>

  <script>
    function calculateAge(returnValueOnly = false) {
      const year = parseInt(document.getElementById("year").value);
      const month = parseInt(document.getElementById("month").value);
      const day = parseInt(document.getElementById("day").value);
      const today = new Date();
      let age = today.getFullYear() - year;
      if (
        today.getMonth() + 1 < month ||
        (today.getMonth() + 1 === month && today.getDate() < day)
      ) {
        age--;
      }
      if (!returnValueOnly) {
        document.getElementById("ageDisplay").innerText = `현재 나이: ${age}세`;
      }
      return age;
    }

    function getElementByDay(birthdate) {
      const date = new Date(birthdate);
      const day = date.getDate();
      const elements = ["목(木)", "화(火)", "토(土)", "금(金)", "수(水)"];
      return elements[day % 5];
    }

    function showResult() {
      const age = calculateAge(true);
      const year = document.getElementById("year").value;
      const month = document.getElementById("month").value.padStart(2, '0');
      const day = document.getElementById("day").value.padStart(2, '0');
      const birthdate = `${year}-${month}-${day}`;
      const element = getElementByDay(birthdate);
      let resultHTML = `<div class="section-title">🧿 오늘의 기운</div><p>계산된 오행: ${element}</p>`;

      if (["목(木)", "화(火)", "토(土)", "금(金)", "수(水)"].includes(element)) {
        resultHTML += `<div class="section-title">💰 재물운</div><p>기회를 잘 살펴보고 무리하지 말고 조금씩 준비해봐.</p>
                       <div class="section-title">⚠️ 조심할 점</div><p>감정 앞세우지 말고 신중하게 생각하자.</p>
                       <div class="section-title">✅ 해야 할 일</div><p>하고 싶은 일, 천천히라도 용기 내서 시작해봐.</p>
                       <div class="section-title">🩺 건강운</div><p>요즘 몸 신호 잘 살펴봐. 무리하지 말고 쉬자.</p>`;
      } else {
        resultHTML += `<div class="section-title">💡 안내</div><p>오행 정보를 찾을 수 없어, 사주풀이가 제공되지 않았어. 생년월일을 다시 확인해줘!</p>`;
      }

      document.getElementById("result").innerHTML = resultHTML;
    }

    // 연도/월/일 드롭다운 초기화
    window.onload = function () {
      const yearSelect = document.getElementById("year");
      for (let y = 1900; y <= 2025; y++) {
        const opt = document.createElement("option");
        opt.value = y;
        opt.textContent = y + "년";
        if (y === 2025) opt.selected = true;
        yearSelect.appendChild(opt);
      }

      const monthSelect = document.getElementById("month");
      for (let m = 1; m <= 12; m++) {
        const opt = document.createElement("option");
        opt.value = m;
        opt.textContent = m + "월";
        monthSelect.appendChild(opt);
      }

      const daySelect = document.getElementById("day");
      for (let d = 1; d <= 31; d++) {
        const opt = document.createElement("option");
        opt.value = d;
        opt.textContent = d + "일";
        daySelect.appendChild(opt);
      }
    };
  </script>
</body>
</html>
